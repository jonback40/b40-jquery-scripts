!function(t,i,o){"use strict";var s=function(s,e){this.$element=t(s),this.options=e,this.$document=t(i),this.$window=t(o).scroll(this._update.bind(this)).resize(this._updateWindow.bind(this)),this.documentHeight=0,this.windowHeight=0,this.scrollTop=0,this.scrollBottom=0,this.elementOffset=0,this.elementHeight=0,this.infiniteX=!0,this.infiniteY=!0,this.direction=1,this.aboveFold=!1,this.focalPoint=0,this.focalPointMapper=function(){},this.init()};s.NAMESPACE="b40.parallax",s.DEFAULTS={moveX:"center",moveY:.5,offset:0,maxX:null,maxY:null,reverse:!1,focalPoint:"auto",keepInBounds:!0,includeMargin:!0},s.prototype={isNumeric:function(t){return!jQuery.isArray(t)&&t-parseFloat(t)>=0},init:function(){switch(this.infiniteX=null!=this.options.maxX?!1:!0,this.infiniteY=null!=this.options.maxY?!1:!0,this.direction=this.options.reverse?-1:1,this.options.focalPoint){case"top":this.focalPointMapper=this._mapFromTop;break;case"bottom":this.focalPointMapper=this._mapFromBottom;break;case"auto":default:this.focalPointMapper=this._mapFromAuto}this.$window.trigger("resize")},_setAboveFold:function(){this.aboveFold=this.elementOffset<this.windowHeight},_setScrollTop:function(){this.scrollTop=this.$window.scrollTop()},_setScrollBottom:function(){this.scrollBottom=this.scrollTop+this.windowHeight},_setFocalPoint:function(){this.focalPoint=this.focalPointMapper()},_getHeight:function(t){return this.options.includeMargin===!0?t.outerHeight(!0):t.height()},_mapFromTop:function(){return this.scrollTop},_mapFromBottom:function(){return this.scrollBottom},_mapFromAuto:function(){return this.aboveFold?this.scrollTop:this.scrollBottom},_updateWindow:function(){this.documentHeight=this.$document.height(),this.windowHeight=this.$window.height(),this.elementOffset=Math.round(this.$element.offset().top),this.elementHeight=this._getHeight(this.$element),this._setAboveFold(),this._setScrollTop(),this._setScrollBottom(),this._setFocalPoint(),this._update()},_inBounds:function(){return this.elementOffset<this.scrollBottom+this.options.offset&&this.elementOffset+this.elementHeight>this.scrollTop+this.options.offset},_mapMove:function(t,i,o,s){var e=Math.round(i*t);return(s?e:Math.max(o,e))*this.direction},_move:function(i){if(!this.options.keepInBounds||this._inBounds()){var o=this.focalPoint-this.elementOffset,s=this.options.moveX,e=this.options.moveY,n=this.isNumeric(s)?this._mapMove(s,o,this.options.maxX,this.infiniteX)+"px":s,h=this.isNumeric(e)?this._mapMove(e,o,this.options.maxY,this.infiniteY)+"px":e;t(i).css("backgroundPosition",n+" "+h)}},_update:function(){this._setScrollTop(),this._setScrollBottom(),this._setFocalPoint();var t=this;return this.$element.each(function(){t._move(this)})}};var e=s,n="parallax",h=t.fn[n];t.fn[n]=function(i){return this.each(function(){var o=t(this),n=o.data(e.NAMESPACE),h=t.extend({},e.DEFAULTS,"object"==typeof i&&i);n||o.data(e.NAMESPACE,n=new s(this,h))})},t.fn[n].Constructor=e,t.fn[n].noConflict=function(){return t.fn[n]=h,this}}($,document,window);